
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>N─АRA Recursive Co-Agent Console: Advanced</title>
  <style>
    body { font-family: sans-serif; padding: 1em; background: #f4fbff; }
    textarea, pre { width: 100%; padding: 1em; margin-top: 1em; font-family: monospace; }
    button { padding: 0.5em 1em; margin-top: 1em; font-size: 1em; }
    .section { margin-bottom: 2em; }
    #memory, #agents, #karma, #log { white-space: pre-wrap; background: #efefef; padding: 1em; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>ЁЯММ N─АRA Recursive Co-Agent Console: Advanced</h1>

  <div class="section">
    <h2>ЁЯОп Agent Code (.nara logic)</h2>
    <textarea id="naraCode" rows="10" placeholder="рдПрдЬреЗрдВрдЯ 'рдирд┐рд░реАрдХреНрд╖рдХ': рдпрджрд┐ ..."></textarea>
    <button onclick="runNara()">Run Agent</button>
  </div>

  <div class="section">
    <h2>ЁЯза рд╕реНрдореГрддрд┐ (Memory)</h2>
    <pre id="memory">{}</pre>
  </div>

  <div class="section">
    <h2>ЁЯСе Active Agents</h2>
    <pre id="agents">рдирд┐рд░реАрдХреНрд╖рдХ</pre>
  </div>

  <div class="section">
    <h2>ЁЯУИ рдХрд░реНрдо (Karma Scores)</h2>
    <pre id="karma">{}</pre>
  </div>

  <div class="section">
    <h2>ЁЯУЬ Execution Log</h2>
    <pre id="log"></pre>
  </div>

  <script>
    let memory = {
      'рд╕рддреНрд░рдГ': 'рднреНрд░рд╖реНрдЯрдГ',
      'рддреНрд░реБрдЯрд┐рдГ': 'LLM connection failed',
    };

    let agents = ['рдирд┐рд░реАрдХреНрд╖рдХ'];
    let karma = {};

    async function runNara() {
      const code = document.getElementById('naraCode').value;
      const log = [];

      try {
        const agent = agents[agents.length - 1];
        log.push("ЁЯза Running Agent: " + agent);

        if (code.includes("рд╕рддреНрд░рдГ") && memory['рд╕рддреНрд░рдГ'] === 'рднреНрд░рд╖реНрдЯрдГ') {
          log.push("ЁЯУМ рд╕рддреНрд░рдГ == рднреНрд░рд╖реНрдЯрдГ тЖТ Executing рдкреНрд░рддреНрдпреБрдкрдХрд░реНрд╖рдВ ...");

          if (code.includes("рд╕реНрдореГрддрд┐[\"рд╕реВрддреНрд░рдГ\"]")) {
            memory["рд╕реВрддреНрд░рдГ"] = "https://github.com/Adtiya/nara-language";
            log.push("ЁЯФЧ рд╕реНрдореГрддрд┐['рд╕реВрддреНрд░рдГ'] updated.");
            karma[agent] = (karma[agent] || 0) + 5;
          }

          if (code.includes("рдЖрд╣реНрд╡рд╛рдирдВ")) {
            log.push("ЁЯУб Performing рдЖрд╣реНрд╡рд╛рдирдВ (LLM call) ...");
            const mockResponse = await fetch("https://jsonplaceholder.typicode.com/posts/1")
              .then(res => res.json());

            memory["рдирд╡рд╛рдЪрд╛рд░рдГ"] = "LLM: " + mockResponse.title;
            log.push("тЬЕ рдЖрд╣реНрд╡рд╛рдирдВ response: " + mockResponse.title);
            karma[agent] = (karma[agent] || 0) + 10;
          }

          if (code.includes("рдПрдЬреЗрдВрдЯ")) {
            agents.push("рд╕реБрдзрд╛рд░рдХ");
            log.push("ЁЯСе Agent 'рд╕реБрдзрд╛рд░рдХ' spawned.");
            karma["рд╕реБрдзрд╛рд░рдХ"] = 0;
          }

          memory['рд╕рддреНрд░рдГ'] = 'рд╕рдВрд╢реЛрдзрд┐рдд';
          log.push("тЬЕ рд╕реНрдореГрддрд┐['рд╕рддреНрд░рдГ'] updated to 'рд╕рдВрд╢реЛрдзрд┐рдд'");
        } else {
          log.push("тЭМ No matching rule executed.");
          karma[agent] = (karma[agent] || 0) - 1;
        }

        document.getElementById('memory').textContent = JSON.stringify(memory, null, 2);
        document.getElementById('agents').textContent = agents.join(", ");
        document.getElementById('karma').textContent = JSON.stringify(karma, null, 2);
        document.getElementById('log').textContent = log.join('\n');

      } catch (e) {
        document.getElementById('log').textContent = "Error: " + e.message;
      }
    }
  </script>
</body>
</html>
