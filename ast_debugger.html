
<!DOCTYPE html>
<html lang="sa">
<head>
  <meta charset="UTF-8">
  <title>N─АRA AST Debugger</title>
  <style>
    body { font-family: monospace; background: #fefefe; padding: 2em; }
    textarea { width: 100%; height: 180px; font-size: 1em; font-family: monospace; }
    pre { background: #f9f9f9; padding: 1em; border: 1px solid #ccc; white-space: pre-wrap; }
    .highlight { background-color: #ffffcc; }
  </style>
</head>
<body>
  <h1>ЁЯФН N─АRA AST Debugger</h1>
  <p>Paste your <code>.nara</code> code below to visualize its abstract syntax tree.</p>
  <textarea id="naraInput">// рдкреБрд░реБрд╖рдГ рд╡реИрджреНрдпрдГ рдЕрд╕реНрддрд┐ { рдЧреБрдгрд╛рдГ: ["рд╕рд╣рд╛рдиреБрднреВрддрд┐"] рдкреНрд░рд╡реЗрд╢рдГ: рдЖрд░реЛрдЧреНрдп_рд╕реНрдерд┐рддрд┐ рдирд┐рд░реНрдЧрдордГ: рдорд╛рд░реНрдЧрджрд░реНрд╢рди_рдпреЛрдЬрдирд╛ }</textarea>
  <br><button onclick="parseNara()">ЁЯза Parse AST</button>
  <pre id="output">AST will appear here...</pre>

  <script>
    function parseNara() {
      const code = document.getElementById("naraInput").value;
      const output = document.getElementById("output");
      const ast = [];

      if (code.includes("рдкреБрд░реБрд╖рдГ")) {
        const agents = [...code.matchAll(/рдкреБрд░реБрд╖рдГ (.*?) рдЕрд╕реНрддрд┐/g)];
        agents.forEach(match => {
          ast.push({ type: "Agent", name: match[1].trim() });
        });
      }

      if (code.includes("рдЧреБрдгрд╛рдГ")) {
        const traits = code.match(/рдЧреБрдгрд╛рдГ:\s*\[(.*?)\]/);
        if (traits) {
          ast.push({ type: "Traits", values: traits[1].split(",").map(t => t.trim().replace(/['"]/g, "")) });
        }
      }

      if (code.includes("рдХрд░реНрдореЗ")) {
        const tasks = [...code.matchAll(/рдХрд░реНрдореЗ "(.*?)" рдпрджрд╛:/g)];
        tasks.forEach(match => {
          ast.push({ type: "Task", name: match[1].trim() });
        });
      }

      if (code.includes("рдпрджрд┐")) {
        ast.push({ type: "Condition", value: "рдпрджрд┐ block present" });
      }

      if (code.includes("рдкреНрд░рддреНрдпреБрдкрдХрд░реНрд╖рдГ")) {
        ast.push({ type: "Recursion", logic: "Feedback loop detected" });
      }

      output.textContent = JSON.stringify(ast, null, 2);
    }
  </script>
</body>
</html>
